<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Trips</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;padding-top:90px;background:#f3f4f6;font-family:Arial}
.admin-header{position:fixed;top:0;left:0;width:100%;height:90px;background:linear-gradient(90deg,#111827,#374151);
display:flex;align-items:center;justify-content:center;color:#fff;border-bottom:3px solid #d4af37}
.company-name{color:#d4af37;font-size:20px;font-weight:bold}
.page{padding:20px}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #d1d5db;padding:6px;text-align:center;font-size:13px}
th{background:#1f2933;color:#fff}
.btn{padding:6px 10px;border:none;border-radius:6px;color:#fff;font-weight:bold;cursor:pointer}
.green{background:#16a34a}.blue{background:#2563eb}
</style>
</head>
<body>

<header class="admin-header">
  <div class="company-name">Sunbeam Transportation â€“ My Trips</div>
</header>

<div class="page">
  <table>
    <thead>
      <tr><th>Trip #</th><th>Pickup</th><th>Dropoff</th><th>Time</th><th>Status</th><th>Actions</th></tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
</div>

<script>
const driver=JSON.parse(localStorage.getItem("loggedDriver")||"{}");
if(!driver.id){alert("No driver logged in");}
const key="driverTrips_"+driver.id;
let trips=JSON.parse(localStorage.getItem(key))||[];
const tbody=document.getElementById("tbody");
function save(){localStorage.setItem(key,JSON.stringify(trips));}
function render(){
  tbody.innerHTML="";
  if(!trips.length){tbody.innerHTML=`<tr><td colspan="6">No trips</td></tr>`;return;}
  trips.forEach((t,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${t.tripId||""}</td>
      <td>${t.pickup||""}</td>
      <td>${t.dropoff||""}</td>
      <td>${t.tripTime||""}</td>
      <td>${t.status||""}</td>
      <td>
        <button class="btn green" onclick="accept(${i})">Accept</button>
        <button class="btn blue" onclick="map('${t.pickup||""}')">Map</button>
      </td>`;
    tbody.appendChild(tr);
  });
}
function accept(i){trips[i].status="Accepted";save();render();}
function map(addr){window.open("https://www.google.com/maps/search/?api=1&query="+encodeURIComponent(addr))}
render();
</script>
</body>
</html>